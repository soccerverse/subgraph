specVersion: 0.0.8
schema:
  file: schema.graphql
dataSources:
  - kind: ethereum/contract
    name: ReferralTracker
    network: matic
    source:
      address: "0x329612BB11Eea1Ea5065993DC32b41C86D6068c2"
      abi: ReferralTracker
      startBlock: 62773319
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Referral
        - Referrer
        - ReferrerTotal
      abis:
        - name: ReferralTracker
          file: ./abis/ReferralTracker.json
      blockHandlers:
        - handler: createPackSaleTiers
          filter:
            kind: once
      eventHandlers:
        - event: ReferrerUpdated(string,string,uint256)
          handler: handleReferrerUpdated
      file: src/referralTracker.ts
  - kind: ethereum/contract
    name: ClubMinter
    network: matic
    source:
      address: "0xeEE0d855112b71Dc68d72053594Af03F92C586Ae"
      abi: ClubMinter
      startBlock: 66056325
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - SaleClub
      abis:
        - name: ClubMinter
          file: ./abis/ClubMinter.json
        - name: SwappingPackSale
          file: abis/SwappingPackSale.json
      blockHandlers:
        - handler: createPackSaleTiers
          filter:
            kind: once
      eventHandlers:
        - event: SharesMinted(indexed uint256,uint256,string,uint256,uint256)
          handler: handleSharesMinted
      file: src/saleTiers.ts
templates:
  - kind: ethereum/contract
    name: PackSaleForReferrals
    network: matic
    source:
      abi: SwappingPackSale
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ReferrerBonus
        - ReferrerTotal
      abis:
        - name: SwappingPackSale
          file: abis/SwappingPackSale.json
      eventHandlers:
        - event: ReferralBonusGiven(string,string,uint256,uint256,uint256,uint256)
          handler: handleReferralBonus
      file: src/referralTracker.ts
  - kind: ethereum/contract
    name: PackSaleForShop
    network: matic
    source:
      abi: SwappingPackSale
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PriceStep
        - SaleClub
        - SaleTier
      abis:
        - name: SwappingPackSale
          file: abis/SwappingPackSale.json
      eventHandlers:
        - event: ClubAdded(indexed uint256)
          handler: handleClubAdded
        - event: ClubRemoved(indexed uint256)
          handler: handleClubRemoved
        - event: ClubSalePaused(indexed uint256)
          handler: handleClubSalePaused
        - event: Paused(address)
          handler: handleSalePaused
        - event: Unpaused(address)
          handler: handleSaleUnpaused
        - event: PricingUpdated((uint256,uint256)[])
          handler: handlePricingUpdated
        - event: SeedUpdated(bytes32)
          handler: handleSeedUpdated
      file: src/saleTiers.ts
